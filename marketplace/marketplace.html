<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmMarket - Marketplace</title>
    <link rel="stylesheet" href="marketplace.css">
    <!-- Include Supabase JS from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Include Navigation Bar -->
    <div id="nav-placeholder"></div>
    <script>
        fetch('../header_n_footer/nav.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('nav-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading nav.html:', error));
    </script>

    <!-- Hero Section -->
    <section class="hero">
        <div class="featured-animal">
            <img src="../images/chicken.jpg" alt="Featured Chicken">
            <div class="animal-info">
                <h3>Featured Chicken - 6 Months Old</h3>
                <p>$20</p>
                <div class="tags">
                    <span>Chicken</span>
                    <span>Laying Hen</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Marketplace Search and Create Listing Section -->
    <section class="marketplace-search">
        <div class="marketplace-content">
            <h2>Marketplace</h2>
            
            <!-- Create Item Listing Form -->
            <div class="create-listing-form">
                <h3>Create Item Listing</h3>
                <form id="listingForm">
                    <div class="form-group">
                        <label for="listing-title">Title</label>
                        <input type="text" id="listing-title" placeholder="e.g. Chicken - 6 Months Old" required>
                    </div>
                    <div class="form-group">
                        <label for="listing-price">Price</label>
                        <input type="number" id="listing-price" placeholder="$" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="listing-type">Animal Type</label>
                        <input type="text" id="listing-type" placeholder="e.g. Chicken" required>
                    </div>
                    <div class="form-group">
                        <label for="listing-location">Location</label>
                        <input type="text" id="listing-location" placeholder="e.g. Springfield, IL" required>
                    </div>
                    <div class="form-group image-upload">
                        <label for="listing-image">Upload Image</label>
                        <div class="upload-area">
                            <input type="file" id="listing-image" accept="image/*" required>
                            <div class="preview" id="image-preview">
                                <p>Drag and drop an image here or click to upload</p>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="create-btn">Create Listing</button>
                </form>
            </div>

            <!-- Search Form -->
            <div class="search-form">
                <div class="search-section">
                    <label>Find Users</label>
                    <input type="text" placeholder="Search users by name or email...">
                </div>
                <div class="search-section">
                    <label>Animal Type</label>
                    <input type="text" placeholder="e.g. Chicken">
                </div>
                <div class="search-section">
                    <label>Location</label>
                    <input type="text" placeholder="e.g. Springfield, IL">
                </div>
                <div class="search-section">
                    <label>Min Price</label>
                    <input type="number" placeholder="$">
                </div>
                <div class="search-section">
                    <label>Max Price</label>
                    <input type="number" placeholder="$">
                </div>
                <button class="search-btn">Search</button>
                <button class="reset-btn">Reset</button>
            </div>
            <p class="no-results">No listings found. Try adjusting your search criteria.</p>

            <!-- Item Listings Section -->
            <div>
                <button id="loginButton">Log In</button>
                <button id="logoutButton">Log Out</button>
                <button id="createListingButton">Create Listing</button>
                <button id="testButton">Fetch Listings</button>
                <div id="result"></div>
            </div>
        </div>
    </section>

    <!-- Include Footer -->
    <div id="footer-placeholder"></div>
    <script>
        fetch('../header_n_footer/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer.html:', error));
    </script>
    <script src="marketplace.js"></script>
</body>
</html>